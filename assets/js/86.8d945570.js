(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{380:function(e,t,a){"use strict";a.r(t);var s=a(14),r=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"一、背景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、背景"}},[e._v("#")]),e._v(" 一、背景")]),e._v(" "),t("p",[e._v("正所谓无规矩不成方圆，在以往的团队开发中，在查看提交历史的时候，发现每个人的提交风格都不一样，举例：")]),e._v(" "),t("ul",[t("li",[e._v("修复了用户名太长显示不全问题")]),e._v(" "),t("li",[e._v("修复了一个bug")]),e._v(" "),t("li",[e._v("111")]),e._v(" "),t("li",[e._v("feat：3149 【活动申请-新增/编辑/查看】活动申请表单头信息加上：申请人、申请部门、申请时间（默认带出，不允许编辑）")])]),e._v(" "),t("p",[e._v("可以看到提交信息有写的好的，也有不好的。比如我想了解一下项目近期有哪些改动，或者我想看哪一次提交修复了某个bug，显然这是很难的。")]),e._v(" "),t("p",[e._v("团队开发中，遵循一个合理、清晰的Git使用流程，是非常重要的。")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/angular/angular.js/blob/master/DEVELOPERS.md#-git-commit-guidelines",target:"_blank",rel:"noopener noreferrer"}},[e._v("Angular规范"),t("OutboundLink")],1),e._v("是目前使用最广的写法，比较合理和系统化，并且有配套的工具。")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://www.ruanyifeng.com/blogimg/asset/2016/bg2016010602.png",alt:""}})]),e._v(" "),t("h2",{attrs:{id:"二、提交格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、提交格式"}},[e._v("#")]),e._v(" 二、提交格式")]),e._v(" "),t("p",[e._v("每次提交，Commit message 包括三个部分：Header（必须），Body（可选） 、 Footer（可选）。")]),e._v(" "),t("p",[e._v("无论哪个部分，都建议不要超过100个字符。这样做是为了避免自动换行影响美观")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("<type>(<scope>): <subject>\n// 空一行\n<body>\n// 空一行\n<footer>\n")])])]),t("p",[e._v("示例")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("fix: 修复sass编译报错\n\n详细描述\n\nCloses #268, #285, #297\n")])])]),t("h3",{attrs:{id:"_2-1-header"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-header"}},[e._v("#")]),e._v(" 2.1 Header")]),e._v(" "),t("p",[e._v("主要的提交类型和描述，大多数时候只提交Header")]),e._v(" "),t("p",[e._v("包括三个字段："),t("code",[e._v("type")]),e._v("（必需）、"),t("code",[e._v("scope")]),e._v("（可选）和"),t("code",[e._v("subject")]),e._v("（必需）。")]),e._v(" "),t("h4",{attrs:{id:"_1-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-type"}},[e._v("#")]),e._v(" （1）type")]),e._v(" "),t("ul",[t("li",[e._v("feat：新功能（feature）")]),e._v(" "),t("li",[e._v("fix：修补bug")]),e._v(" "),t("li",[e._v("docs：文档（documentation）")]),e._v(" "),t("li",[e._v("style： 格式（不影响代码运行的变动）")]),e._v(" "),t("li",[e._v("refactor：重构（即不是新增功能，也不是修改bug的代码变动）")]),e._v(" "),t("li",[e._v("test：增加测试")]),e._v(" "),t("li",[e._v("chore：构建过程或辅助工具的变动")])]),e._v(" "),t("p",[e._v("当某次提交有feat、fix和其他类型时，以feat、fix为准。")]),e._v(" "),t("h4",{attrs:{id:"_2-scope"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-scope"}},[e._v("#")]),e._v(" （2）scope")]),e._v(" "),t("p",[t("code",[e._v("scope")]),e._v("用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。")]),e._v(" "),t("h4",{attrs:{id:"_3-subject"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-subject"}},[e._v("#")]),e._v(" （3）"),t("strong",[e._v("subject")])]),e._v(" "),t("p",[t("code",[e._v("subject")]),e._v("是 commit 目的的简短描述，不超过50个字符。")]),e._v(" "),t("ul",[t("li",[e._v("以动词开头，使用第一人称现在时，比如"),t("code",[e._v("change")]),e._v("，而不是"),t("code",[e._v("changed")]),e._v("或"),t("code",[e._v("changes")])]),e._v(" "),t("li",[e._v("第一个字母小写")]),e._v(" "),t("li",[e._v("结尾不加句号（"),t("code",[e._v(".")]),e._v("）")])]),e._v(" "),t("p",[e._v("比如"),t("code",[e._v("feat：增加用户管理")]),e._v(" 、"),t("code",[e._v("fix：修复 sass 编译报错")])]),e._v(" "),t("h3",{attrs:{id:"_2-2-body-可选"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-body-可选"}},[e._v("#")]),e._v(" 2.2 Body（可选）")]),e._v(" "),t("p",[e._v("Body 部分是对本次 commit 的详细描述，可以分成多行。")]),e._v(" "),t("h3",{attrs:{id:"_2-3-footer-可选"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-footer-可选"}},[e._v("#")]),e._v(" 2.3 Footer（可选）")]),e._v(" "),t("p",[e._v("Footer 部分只用于两种情况。")]),e._v(" "),t("h4",{attrs:{id:"_1-不兼容变动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-不兼容变动"}},[e._v("#")]),e._v(" （1）不兼容变动")]),e._v(" "),t("p",[e._v("如果当前代码与上一个版本不兼容，则 Footer 部分以"),t("code",[e._v("BREAKING CHANGE")]),e._v("开头，后面是对变动的描述、以及变动理由和迁移方法。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("BREAKING CHANGE: isolate scope bindings definition has changed.\n\n    To migrate the code follow the example below:\n\n    Before:\n\n    scope: {\n      myAttr: 'attribute',\n    }\n\n    After:\n\n    scope: {\n      myAttr: '@',\n    }\n\n    The removed `inject` wasn't generaly useful for directives so there should be no code using it.\n")])])]),t("h4",{attrs:{id:"_2-关闭issue"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-关闭issue"}},[e._v("#")]),e._v(" （2）关闭Issue")]),e._v(" "),t("p",[e._v("如果当前 commit 针对某个issue，那么可以在 Footer 部分关闭这个 issue 。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("关闭一个\nCloses #234\n关闭多个\nCloses #123, #245, #992\n")])])]),t("h3",{attrs:{id:"_2-4-revert"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-revert"}},[e._v("#")]),e._v(" 2.4 Revert")]),e._v(" "),t("p",[e._v("还有一种特殊情况，如果当前 commit 用于撤销以前的 commit，则必须以"),t("code",[e._v("revert:")]),e._v("开头，后面跟着被撤销 Commit 的 Header。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("revert: feat(pencil): add 'graphiteWidth' option\n\nThis reverts commit 667ecc1654a317a13331b17617d973392f415f02.\n")])])]),t("p",[e._v("Body部分的格式是固定的，必须写成"),t("code",[e._v("This reverts commit <hash>.")]),e._v("，其中的"),t("code",[e._v("hash")]),e._v("是被撤销 commit 的 SHA 标识符。")]),e._v(" "),t("h3",{attrs:{id:"_2-5-更新远程分支列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-更新远程分支列表"}},[e._v("#")]),e._v(" 2.5 更新远程分支列表")]),e._v(" "),t("p",[t("code",[e._v("git remote update origin --prune")]),e._v(" 更新远程分支列表")]),e._v(" "),t("h2",{attrs:{id:"三、团队提交流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、团队提交流程"}},[e._v("#")]),e._v(" 三、团队提交流程")]),e._v(" "),t("h3",{attrs:{id:"_3-1-提交频率"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-提交频率"}},[e._v("#")]),e._v(" 3.1 提交频率")]),e._v(" "),t("h2",{attrs:{id:"四、辅助工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、辅助工具"}},[e._v("#")]),e._v(" 四、辅助工具")]),e._v(" "),t("h3",{attrs:{id:"_4-1-开发者工具-visual-studio-code-安装插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-开发者工具-visual-studio-code-安装插件"}},[e._v("#")]),e._v(" 4.1 开发者工具 Visual Studio Code 安装插件")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://marketplace.visualstudio.com/items?itemName=adam-bender.commit-message-editor",target:"_blank",rel:"noopener noreferrer"}},[e._v("Commit Message Editor"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://marketplace.visualstudio.com/items?itemName=redjue.git-commit-plugin",target:"_blank",rel:"noopener noreferrer"}},[e._v("git-commit-plugin"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Commit message 和 Change log 编写指南 - 阮一峰的网络日志"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);