(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{410:function(t,n,o){"use strict";o.r(n);var s=o(14),r=Object(s.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"js原型对象中constructor的作用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#js原型对象中constructor的作用"}},[t._v("#")]),t._v(" JS原型对象中constructor的作用")]),t._v(" "),n("p",[t._v("由Vue源码引发的思考")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const Sub = function VueComponent (options) {\nthis._init(options)\n}\nSub.prototype = Object.create(Super.prototype)\nSub.prototype.constructor = Sub\n")])])]),n("p",[t._v("为什么这里constructor要重新指向Sub?查阅资料的结果:")]),t._v(" "),n("blockquote",[n("ol",[n("li",[t._v("constructor属性不影响任何JavaScript的内部属性。constructor其实没有什么用处， 只是JavaScript语言设计的历史遗留物。")]),t._v(" "),n("li",[t._v("由于constructor属性是可以变更的，所以未必真的指向对象的构造函数，只是一个提示。")]),t._v(" "),n("li",[t._v("不过，从编程习惯上，我们应该尽量让对象的constructor指向其构造函数，以维持这个惯例")])])]),t._v(" "),n("p",[t._v("那么这属性有什么作用呢，比如这种情况，给闭包中的函数增加属性和方法：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("var xiaoming;\n(function() {\n\tfunction Person(name) {\n\t\tthis.name = name;\n\t}\n\n\tPerson.prototype.log = function() {\n\t\tconsole.log(this.name);\n\t}\n\txiaoming = new Person('小明');\n})()\nxiaoming.log(); //小明\n")])])]),n("p",[t._v("如果想要给Person原型上添加新属性，")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("xiaoming.constructor.prototype.log2 = function(){\n\tconsole.log(this.name+this.name);\n}\nxiaoming.log2() // 小明小明\n")])])]),n("blockquote",[n("p",[t._v("不过你拿到 prototype 也不见得能拿到是正确的 constructor，JS没有提供方式确保你拿到“正确”的\nconstructor。我们只能相信对象上的 constructor 应该是“正确”的 constructor。")])]),t._v(" "),n("h2",{attrs:{id:"参考文章"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),n("p",[t._v("https://www.cnblogs.com/zhangmingzhao/p/12093883.html")])])}),[],!1,null,null,null);n.default=r.exports}}]);